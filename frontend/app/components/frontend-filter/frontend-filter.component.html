<form class="filter-card" [formGroup]="filterForm">

  <h2>Sélectionnez vos critères de filtrage</h2>

  <pnx-input
    label="Nom du filtre"
    formControlName="name">
  </pnx-input>

  <pnx-select
    label="Champs à extraire"
    formControlName="fields"
    [options]="availableFields"
    [multiSelect]="true"
    [searchBar]="true">
  </pnx-select>

  <div class="period-row">
    <pnx-input
      label="Date de début"
      type="date"
      formControlName="startDate">
    </pnx-input>

    <pnx-input
      label="Date de fin"
      type="date"
      formControlName="endDate">
    </pnx-input>
  </div>

  <div *ngIf="dateRangeInvalid" class="error-msg">
    Entrez une période valide
  </div>

  <div class="filter-actions">
    <button mat-raised-button class="button-success"
            [disabled]="filterForm.invalid || dateRangeInvalid"
            (click)="applyFilter()">
      <mat-icon>check_circle</mat-icon>
      Valider
    </button>

    <button mat-raised-button color="warn" (click)="close.emit()">
      <mat-icon>close</mat-icon>
      Fermer
    </button>
  </div>

</form>
